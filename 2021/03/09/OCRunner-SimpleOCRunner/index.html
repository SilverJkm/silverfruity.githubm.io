<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans,en,default">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="hotfix,iOS,Objective-C,">










<meta name="description" content="Âú®Ê≠£ÊñáÂºÄÂßãÂâçÔºåÊàë‰ª¨ÂÖàÁúãÁúãÁªôÂá∫ÁöÑËØ≠Ê≥ïÊ†ëËß£ÈáäÊâßË°å.gifÔºåOCRunnerÁöÑÊ†∏ÂøÉËß£ÈáäÊâßË°åÈÉ®ÂàÜ‰πüÊòØÂ¶ÇÊ≠§„ÄÇ  Êú¨ÂõæÂá∫Ëá™: ËôöÊãüÊú∫ÈöèË∞àÔºà‰∏ÄÔºâÔºöËß£ÈáäÂô®ÔºåÊ†ëÈÅçÂéÜËß£ÈáäÂô®ÔºåÂü∫‰∫éÊ†à‰∏éÂü∫‰∫éÂØÑÂ≠òÂô®ÔºåÂ§ßÊùÇÁÉ© Â¶ÇÊûú‰Ω†ËÆ©Êàë‰ªÖ‰ªÖÂè™Èù†ÊñáÂ≠óÂ∞±ËÉΩÁªô‰Ω†Ëß£ÈáäÊ∏ÖÊ•ö OCRunner ÊòØÊÄé‰πàËøêË°åËµ∑Êù•ÁöÑÔºå‰Ω†‰ª¨ÂèØËÉΩÊòØÂú®‰∏∫ÈöæÊàëÂ∞èËíãÔºåËÇöÂ≠êÈáåÂ¢®Ê∞¥ÁúüÁöÑÊ≤°ÈÇ£‰πàÂ§öÂïäÔºåÂ§™Èöæ‰∫ÜüòÇ„ÄÇÊâÄ‰ª•Âú®Ëøô‰∏ÄÂ∞èËäÇÔºåÊàëÁªôÂ§ßÂÆ∂ÂáÜÂ§á‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁâà OCRunnerÔºåÂ∏åÊúõÂ§ßÂÆ∂ËÉΩ‰ªéËøô‰∏™‰æãÂ≠ê">
<meta name="keywords" content="hotfix,iOS,Objective-C">
<meta property="og:type" content="article">
<meta property="og:title" content="OCRunner-ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁâà OCRunner">
<meta property="og:url" content="https://silverfruity.github.io/2021/03/09/OCRunner-SimpleOCRunner/index.html">
<meta property="og:site_name" content="SilverFruity">
<meta property="og:description" content="Âú®Ê≠£ÊñáÂºÄÂßãÂâçÔºåÊàë‰ª¨ÂÖàÁúãÁúãÁªôÂá∫ÁöÑËØ≠Ê≥ïÊ†ëËß£ÈáäÊâßË°å.gifÔºåOCRunnerÁöÑÊ†∏ÂøÉËß£ÈáäÊâßË°åÈÉ®ÂàÜ‰πüÊòØÂ¶ÇÊ≠§„ÄÇ  Êú¨ÂõæÂá∫Ëá™: ËôöÊãüÊú∫ÈöèË∞àÔºà‰∏ÄÔºâÔºöËß£ÈáäÂô®ÔºåÊ†ëÈÅçÂéÜËß£ÈáäÂô®ÔºåÂü∫‰∫éÊ†à‰∏éÂü∫‰∫éÂØÑÂ≠òÂô®ÔºåÂ§ßÊùÇÁÉ© Â¶ÇÊûú‰Ω†ËÆ©Êàë‰ªÖ‰ªÖÂè™Èù†ÊñáÂ≠óÂ∞±ËÉΩÁªô‰Ω†Ëß£ÈáäÊ∏ÖÊ•ö OCRunner ÊòØÊÄé‰πàËøêË°åËµ∑Êù•ÁöÑÔºå‰Ω†‰ª¨ÂèØËÉΩÊòØÂú®‰∏∫ÈöæÊàëÂ∞èËíãÔºåËÇöÂ≠êÈáåÂ¢®Ê∞¥ÁúüÁöÑÊ≤°ÈÇ£‰πàÂ§öÂïäÔºåÂ§™Èöæ‰∫ÜüòÇ„ÄÇÊâÄ‰ª•Âú®Ëøô‰∏ÄÂ∞èËäÇÔºåÊàëÁªôÂ§ßÂÆ∂ÂáÜÂ§á‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁâà OCRunnerÔºåÂ∏åÊúõÂ§ßÂÆ∂ËÉΩ‰ªéËøô‰∏™‰æãÂ≠ê">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://silverfruity.github.io/2021/03/09/OCRunner-SimpleOCRunner/eval_ast.gif">
<meta property="og:image" content="https://silverfruity.github.io/2021/03/09/OCRunner-SimpleOCRunner/OCRunnerExecute.png">
<meta property="og:updated_time" content="2021-03-09T09:37:11.920Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OCRunner-ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁâà OCRunner">
<meta name="twitter:description" content="Âú®Ê≠£ÊñáÂºÄÂßãÂâçÔºåÊàë‰ª¨ÂÖàÁúãÁúãÁªôÂá∫ÁöÑËØ≠Ê≥ïÊ†ëËß£ÈáäÊâßË°å.gifÔºåOCRunnerÁöÑÊ†∏ÂøÉËß£ÈáäÊâßË°åÈÉ®ÂàÜ‰πüÊòØÂ¶ÇÊ≠§„ÄÇ  Êú¨ÂõæÂá∫Ëá™: ËôöÊãüÊú∫ÈöèË∞àÔºà‰∏ÄÔºâÔºöËß£ÈáäÂô®ÔºåÊ†ëÈÅçÂéÜËß£ÈáäÂô®ÔºåÂü∫‰∫éÊ†à‰∏éÂü∫‰∫éÂØÑÂ≠òÂô®ÔºåÂ§ßÊùÇÁÉ© Â¶ÇÊûú‰Ω†ËÆ©Êàë‰ªÖ‰ªÖÂè™Èù†ÊñáÂ≠óÂ∞±ËÉΩÁªô‰Ω†Ëß£ÈáäÊ∏ÖÊ•ö OCRunner ÊòØÊÄé‰πàËøêË°åËµ∑Êù•ÁöÑÔºå‰Ω†‰ª¨ÂèØËÉΩÊòØÂú®‰∏∫ÈöæÊàëÂ∞èËíãÔºåËÇöÂ≠êÈáåÂ¢®Ê∞¥ÁúüÁöÑÊ≤°ÈÇ£‰πàÂ§öÂïäÔºåÂ§™Èöæ‰∫ÜüòÇ„ÄÇÊâÄ‰ª•Âú®Ëøô‰∏ÄÂ∞èËäÇÔºåÊàëÁªôÂ§ßÂÆ∂ÂáÜÂ§á‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁâà OCRunnerÔºåÂ∏åÊúõÂ§ßÂÆ∂ËÉΩ‰ªéËøô‰∏™‰æãÂ≠ê">
<meta name="twitter:image" content="https://silverfruity.github.io/2021/03/09/OCRunner-SimpleOCRunner/eval_ast.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Âçö‰∏ª'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://silverfruity.github.io/2021/03/09/OCRunner-SimpleOCRunner/">





  <title>OCRunner-ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁâà OCRunner | SilverFruity</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SilverFruity</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            È¶ñÈ°µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            ÂΩíÊ°£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Ê†áÁ≠æ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            ÂàÜÁ±ª
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://silverfruity.github.io/2021/03/09/OCRunner-SimpleOCRunner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SilverFruity">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">OCRunner-ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁâà OCRunner</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂèëË°®‰∫é</span>
              
              <time title="ÂàõÂª∫‰∫é" itemprop="dateCreated datePublished" datetime="2021-03-09T17:25:49+08:00">
                2021-03-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂàÜÁ±ª‰∫é</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OpenSource/" itemprop="url" rel="index">
                    <span itemprop="name">OpenSource</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/03/09/OCRunner-SimpleOCRunner/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2021/03/09/OCRunner-SimpleOCRunner/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2021/03/09/OCRunner-SimpleOCRunner/" class="leancloud_visitors" data-flag-title="OCRunner-ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁâà OCRunner">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">ÈòÖËØªÊ¨°Êï∞&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Â≠óÊï∞ÁªüËÆ°&#58;</span>
                
                <span title="Â≠óÊï∞ÁªüËÆ°">
                  4.7k Â≠ó
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">ÈòÖËØªÊó∂Èïø &asymp;</span>
                
                <span title="ÈòÖËØªÊó∂Èïø">
                  19 ÂàÜÈíü
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Âú®Ê≠£ÊñáÂºÄÂßãÂâçÔºåÊàë‰ª¨ÂÖàÁúãÁúãÁªôÂá∫ÁöÑËØ≠Ê≥ïÊ†ëËß£ÈáäÊâßË°å.gifÔºåOCRunnerÁöÑÊ†∏ÂøÉËß£ÈáäÊâßË°åÈÉ®ÂàÜ‰πüÊòØÂ¶ÇÊ≠§„ÄÇ</p>
<img src="/2021/03/09/OCRunner-SimpleOCRunner/eval_ast.gif">
<p><a href="https://www.iteye.com/blog/rednaxelafx-492667" target="_blank" rel="noopener">Êú¨ÂõæÂá∫Ëá™: ËôöÊãüÊú∫ÈöèË∞àÔºà‰∏ÄÔºâÔºöËß£ÈáäÂô®ÔºåÊ†ëÈÅçÂéÜËß£ÈáäÂô®ÔºåÂü∫‰∫éÊ†à‰∏éÂü∫‰∫éÂØÑÂ≠òÂô®ÔºåÂ§ßÊùÇÁÉ©</a></p>
<p>Â¶ÇÊûú‰Ω†ËÆ©Êàë‰ªÖ‰ªÖÂè™Èù†ÊñáÂ≠óÂ∞±ËÉΩÁªô‰Ω†Ëß£ÈáäÊ∏ÖÊ•ö OCRunner ÊòØÊÄé‰πàËøêË°åËµ∑Êù•ÁöÑÔºå‰Ω†‰ª¨ÂèØËÉΩÊòØÂú®‰∏∫ÈöæÊàëÂ∞èËíãÔºåËÇöÂ≠êÈáåÂ¢®Ê∞¥ÁúüÁöÑÊ≤°ÈÇ£‰πàÂ§öÂïäÔºåÂ§™Èöæ‰∫ÜüòÇ„ÄÇÊâÄ‰ª•Âú®Ëøô‰∏ÄÂ∞èËäÇÔºåÊàëÁªôÂ§ßÂÆ∂ÂáÜÂ§á‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁâà OCRunnerÔºåÂ∏åÊúõÂ§ßÂÆ∂ËÉΩ‰ªéËøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÁúüÊ≠£Áü•ÈÅìÂÆÉÊòØÂ¶Ç‰ΩïËøêË°åÁöÑ„ÄÇ</p>
<p>Â∏åÊúõ‰Ω†‰ª¨ÁúãËßÅÈ°πÁõÆ‰∏≠ÁöÑ SingleEngine Á±ª‰∏çË¶ÅÁ¨ëÔºàÂìàÂìàÂìàÔºâÔºåÊàëÂè™ÊòØÊÉ≥Ë°®Ëææ ÂçïÁº∏ÂèëÂä®Êú∫ ÁöÑÊÑèÊÄù - _ -ÔºåÊàëÂøÉÁà±ÁöÑÂ∞èÊë©ÊâòÂ∞±ÊòØÂçïÁº∏ÊãñÊãâÊú∫„ÄÇ</p>
<p>Êú¨ËäÇÂÅáËÆæËØªËÄÖÂπ∂‰∏çÂÖ∑Â§áÁºñËØëÁõ∏ÂÖ≥ÁöÑÁü•ËØÜ„ÄÇ</p>
<p>Êú¨ÊñáÂØπ lex Âíå yacc ‰ªãÁªçÊúâÈôêÔºåÂÖ≥‰∫é flex Âíå bison ÁöÑËØ¶ÁªÜ‰ΩøÁî®ÂèØ‰ª•ÂèÇÁÖß„Ääflex‰∏ébison‰∏≠ÊñáÁâà„ÄãÊàñËÄÖ „Ääflex&amp;bison„Äã„ÄÇ</p>
<p><a href="https://github.com/SilverFruity/SimpleOCRunnerDemo" target="_blank" rel="noopener">DemoÊ∫êÁ†Å</a>ÔºåÂª∫ËÆÆ‰ΩøÁî® <code>git clone</code> ÁöÑÂΩ¢Âºè‰∏ãËΩΩÊ∫êÁ†ÅÔºåÊØè‰∏™Â∞èËäÇÁöÑÁõ∏Â∫îÊ∫êÁ†ÅÈÉΩÂØπÂ∫îÂú®ÂêÑËá™ÁöÑ commit Èáå„ÄÇÈÄöËøáËæπÁúãÊñáÁ´†ËæπÈòÖËØªÊ∫êÁ†ÅÁöÑÂΩ¢ÂºèÈ£üÁî®ÔºåÊõ¥È¶ôÂìü„ÄÇ</p>
<p>Êàë‰ª¨Â∞ÜÈÄöËøá‰ª•‰∏ãËøô‰∏™‰æãÂ≠êÔºåÊù•ËØ¥Êòé OCRunner ÊâßË°åÁöÑ‰∏ªË¶ÅÂÆûÁé∞ÔºåÂ∞ÜÁúÅÁï•Ë°•‰∏ÅÊñá‰ª∂ÁöÑÂ∫èÂàóÂåñÂíåÂä†ËΩΩËøáÁ®ã„ÄÇ</p>
<p>Áé∞Âú®ÔºåÊàë‰ª¨ÁöÑÁõÆÊ†áÊòØËÆ©ËøôÊÆµÊñáÊú¨ÂÉè C ‰∏ÄÊ†∑ÊâßË°åÔºåÂπ∂‰∏îÊúÄÁªàÂèòÈáè <strong>c</strong> ÁöÑÂÄº‰∏∫ 5 „ÄÇ</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> d = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> arg0, <span class="keyword">double</span> arg1)</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arg0 + arg1 + d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">1</span>; </span><br><span class="line"><span class="keyword">double</span> b = <span class="number">2.0</span>;</span><br><span class="line"><span class="keyword">int</span> c = add(a, b);</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="ËØçÊ≥ïÂàÜÊûêÂô®"><a href="#ËØçÊ≥ïÂàÜÊûêÂô®" class="headerlink" title="ËØçÊ≥ïÂàÜÊûêÂô®"></a>ËØçÊ≥ïÂàÜÊûêÂô®</h4><p>ÈÄö‰øóÊù•ËØ¥ÔºåËØçÊ≥ïÂàÜÊûêÂ∞±ÊòØÂ∞ÜÁ¨¶ÂêàÁõ∏Â∫îËßÑÂàôÁöÑÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™ <strong>Token</strong>ÔºàÂèØ‰ª•Â∞ÜÂÆÉÁúã‰∏∫‰∏Ä‰∏™Áî±<strong>Á±ªÂûã</strong>Âíå<strong>ÂÄº</strong>‰∏§‰∏™Â±ûÊÄßÁªÑÊàêÁöÑÁ±ªÔºâ„ÄÇ</p>
<p>ÊØîÂ¶ÇÂΩìÂåπÈÖçÂà∞ ‚Äòint‚Äô Êó∂Ôºå‚Äôint‚Äô Â∞Ü‰ºöË¢´ËΩ¨Êç¢‰∏∫ INT_TYPE Ôºå‰πüÊòØÂ∞±ÊòØ Token ÁöÑÁ±ªÂûãÔºåÂÆÉÁöÑÂÄºÂèØ‰ª•ÊòØÊàë‰ª¨ÂêéÁª≠ÁöÑÂÄºÁ±ªÂûãÔºà‰∏Ä‰∏™Êûö‰∏æÔºâ„ÄÇ</p>
<p>ÂÜçÊØîÂ¶ÇÂΩìÂåπÈÖçÂà∞ ‚Äò1.0‚Äô Â≠óÁ¨¶‰∏≤Êó∂Ôºå‚Äô1.0‚Äô Ë¢´ËΩ¨Êç¢‰∏∫ DOUBLE_LITERAL Á±ªÂûãÂπ∂‰∏î Token Ê≠§Êó∂ÁöÑÂÄº‰∏∫ÊµÆÁÇπÊï∞ 1.0„ÄÇ</p>
<p>ÈíàÂØπËøôÈáå‰æãÂ≠êÔºåÊàë‰ª¨Áé∞Âú®ÊúâÂ¶Ç‰∏ãÂá†‰∏™ËßÑÂàô:</p>
<ol>
<li>ÂÖ≥ÈîÆËØç: int„ÄÅdouble„ÄÅreturn</li>
<li><p>Ê†áËØÜÁ¨¶ÔºàÂèØ‰ª•ÊòØÂèòÈáèÂêç„ÄÅÁ±ªÂûãÁ≠âÔºâ:  ‰ª•Â≠óÊØç„ÄÅ_ „ÄÅ$ ÂºÄÂ§¥ÁöÑÂ≠óÁ¨¶‰∏≤</p>
</li>
<li><p>Êï∞ÂÄº:  Êï¥Êï∞„ÄÅÊµÆÁÇπÊï∞</p>
</li>
<li>Á¨¶Âè∑: ( ) ; { } , = +</li>
</ol>
<p>‰∏äËø∞ÈÉΩÊòØÊàë‰ª¨Êé•‰∏ãÊù•ÈúÄË¶ÅËØÜÂà´ÁöÑÔºåÊàë‰ª¨Â∞ÜÁõ¥Êé•‰ΩøÁî® flex ÂÆåÊàêËØçÊ≥ïÂàÜÊûêÂô®„ÄÇ</p>
<p>ËØçÊ≥ïÂàÜÊûêÂô® <strong>lexer.l</strong> ‰∏≠ÁöÑ‰ª£Á†Å:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">%option noyywrap</span><br><span class="line">%&#123;</span><br><span class="line">    <span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"y.tab.h"</span></span></span><br><span class="line">%&#125;</span><br><span class="line">%%</span><br><span class="line"><span class="string">","</span> &#123; <span class="keyword">return</span> <span class="string">','</span>;&#125;</span><br><span class="line"><span class="string">";"</span> &#123; <span class="keyword">return</span> <span class="string">';'</span>; &#125;</span><br><span class="line"><span class="string">"("</span> &#123; <span class="keyword">return</span> <span class="string">'('</span>; &#125;</span><br><span class="line"><span class="string">")"</span> &#123; <span class="keyword">return</span> <span class="string">')'</span>; &#125;</span><br><span class="line"><span class="string">"&#123;"</span> &#123; <span class="keyword">return</span> <span class="string">'&#123;'</span>; &#125;</span><br><span class="line"><span class="string">"&#125;"</span> &#123; <span class="keyword">return</span> <span class="string">'&#125;'</span>; &#125;</span><br><span class="line"><span class="string">"="</span> &#123; <span class="keyword">return</span> <span class="string">'='</span>; &#125;</span><br><span class="line"><span class="string">"+"</span> &#123; <span class="keyword">return</span> <span class="string">'+'</span>; &#125;</span><br><span class="line"><span class="string">"-"</span> &#123; <span class="keyword">return</span> <span class="string">'-'</span>; &#125;</span><br><span class="line"><span class="string">"int"</span> &#123; <span class="keyword">return</span> INT_TYPE; &#125;</span><br><span class="line"><span class="string">"double"</span> &#123; <span class="keyword">return</span> DOUBLE_TYPE; &#125;</span><br><span class="line"><span class="string">"return"</span> &#123; <span class="keyword">return</span>  RETURN; &#125;</span><br><span class="line"><span class="comment">// ÊµÆÁÇπÊï∞</span></span><br><span class="line">[<span class="number">0</span><span class="number">-9</span>]+\.[<span class="number">0</span><span class="number">-9</span>]+ &#123; yylval.doubleValue = atof(yytext); <span class="keyword">return</span> DOUBLE_LITERAL; &#125;</span><br><span class="line"><span class="comment">// Êï¥Êï∞</span></span><br><span class="line">[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]* &#123;  yylval.intValue = (<span class="keyword">int</span>)strtol(yytext, <span class="literal">NULL</span>, <span class="number">10</span>); <span class="keyword">return</span> INTETER_LITERAL; &#125;</span><br><span class="line"><span class="comment">// Ê†áËØÜÁ¨¶</span></span><br><span class="line">[A-Za-z_$][A-Za-z_$<span class="number">0</span><span class="number">-9</span>]* &#123; yylval.stringValue = yytext; <span class="keyword">return</span> IDENTIFIER; &#125;</span><br><span class="line">%%</span><br></pre></td></tr></table></figure>
<h5 id="FlexËØ≠Ê≥ïÁÆÄÂçïÁÆÄ‰ªã"><a href="#FlexËØ≠Ê≥ïÁÆÄÂçïÁÆÄ‰ªã" class="headerlink" title="FlexËØ≠Ê≥ïÁÆÄÂçïÁÆÄ‰ªã"></a>FlexËØ≠Ê≥ïÁÆÄÂçïÁÆÄ‰ªã</h5><ul>
<li>‰∏äÂçäÈÉ®ÂàÜÁöÑ<code>%{  %}</code> ‰∏ªË¶ÅÁî®‰∫é‰π¶ÂÜô C ‰ª£Á†ÅÔºåÂºïÂÖ•Â§¥Êñá‰ª∂ÔºåËá™ÂÆö‰πâÂáΩÊï∞Á≠âÁ≠âÔºåÊúÄÁªà‰ºö‰ª•ÊñáÊú¨ÁöÑÂΩ¢ÂºèË¢´Ê∑ªÂä†Âà∞ <strong>lexer.yy.c</strong> ‰∏≠Ôºà Demo ‰∏≠‰Ω†ÂèØ‰ª•Âú®ÁºñËØëÁºìÂ≠ò‰∏≠ÊâæÂà∞ËØ•Êñá‰ª∂Ôºâ„ÄÇ</li>
<li>‰∏ãÂçäÈÉ®ÂàÜÁöÑ <code>%%  %%</code>Â∞±ÊòØÂÖ≥ÈîÆ‰∫ÜÔºåÈÄöËøá‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÔºåÂ∞ÜÁ¨¶ÂêàËßÑÂàôÁöÑÂ≠óÁ¨¶ÊµÅËΩ¨Êç¢‰∏∫Áõ∏Â∫îÁöÑ token „ÄÇ</li>
<li><strong>yylval</strong>ËøôÂàôÊòØ Token ÁöÑÂÄºÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂÆÉ‰∏Ä‰∏™ int Á±ªÂûãÔºå‰ΩÜÊòØÂú® bison ‰∏≠ÂèØ‰ª•‰ΩøÁî® <strong>%union</strong> Â£∞ÊòéÊù•ÈáçÊñ∞ÂÆö‰πâÂÆÉÁöÑÁ±ªÂûã„ÄÇ</li>
</ul>
<p>ÂΩìÊàë‰ª¨Ë∞ÉÁî®ËØçÊ≥ïÂàÜÊûêÂô®ÂêéÔºå‰∏äËø∞ÊñáÊú¨Â∞Ü‰ºöÂÅöÂá∫Â¶Ç‰∏ãËΩ¨Êç¢ÔºåÂ¶Ç‰ΩïÂØπÂÆÉËøõË°åËØ≠Ê≥ïÂåπÈÖçÔºåËøôÂ∞±ÊòØÊé•‰∏ãÊù•ÁöÑÂÜÖÂÆπ‰∫Ü„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">	int          d      =       2       ;</span><br><span class="line">&gt; INT_TYPE IDENTIFIER = INTETER_LITERAL ;</span><br><span class="line">  int      add        (    int       arg0     ,   double      arg1     ) &#123;</span><br><span class="line">&gt; INT_TYPE IDENTIFIER ( INT_TYPE IDENTIFIER , DOUBLE_TYPE IDENTIFIER ) &#123;</span><br><span class="line">  return     arg0   +    arg1    +     d      ;</span><br><span class="line">&gt; RETURN IDENTIFIER + IDENTIFIER + IDENTIFIER ;</span><br><span class="line">  &#125;</span><br><span class="line">&gt; &#125;</span><br><span class="line">	int          a      =       1       ;</span><br><span class="line">&gt; INT_TYPE IDENTIFIER = INTETER_LITERAL ;</span><br><span class="line">  double          b      =         2.0     ;</span><br><span class="line">&gt; DOUBLE_TYPE IDENTIFIER = INTETER_LITERAL ;</span><br><span class="line">  int           c     =    add     (     a      ,      b     ) ;</span><br><span class="line">&gt; INT_TYPE IDENTIFIER = IDENTIFIER ( IDENTIFIER , IDENTIFIER ) ;</span><br></pre></td></tr></table></figure>
<h4 id="ËØ≠Ê≥ïÂàÜÊûêÂô®"><a href="#ËØ≠Ê≥ïÂàÜÊûêÂô®" class="headerlink" title="ËØ≠Ê≥ïÂàÜÊûêÂô®"></a>ËØ≠Ê≥ïÂàÜÊûêÂô®</h4><p>ËØ≠Ê≥ïÂàÜÊûêÂô® <strong>parser.y</strong> ‰∏≠ÁöÑ‰ª£Á†ÅÔºåÁõÆÂâçËøòÊ≤°Êúâ‰ªª‰ΩïËØ≠Ê≥ïÁõ∏ÂÖ≥ÁöÑÈÄªËæë„ÄÇ</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">%&#123;</span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> YYDEBUG 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> YYERROR_VERBOSE</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">yylex</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">yyerror</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s)</span></span>;</span><br><span class="line">%&#125;</span><br><span class="line">%<span class="keyword">union</span>&#123;</span><br><span class="line">    <span class="keyword">uint64_t</span> intValue;</span><br><span class="line">    <span class="keyword">double</span> doubleValue; </span><br><span class="line">    <span class="keyword">char</span> *stringValue;</span><br><span class="line">    __unsafe_unretained id object;</span><br><span class="line">&#125;</span><br><span class="line">%token&lt;stringValue&gt; IDENTIFIER</span><br><span class="line">%token&lt;doubleValue&gt; DOUBLE_LITERAL</span><br><span class="line">%token&lt;intValue&gt; 		INTETER_LITERAL</span><br><span class="line">%token INT_TYPE</span><br><span class="line">%token DOUBLE_TYPE</span><br><span class="line">%token RETURN</span><br><span class="line">%start door</span><br><span class="line">%type&lt;object&gt; statements</span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line">door: </span><br><span class="line"><span class="comment">/*empty*/</span></span><br><span class="line">| statements;</span><br><span class="line">;</span><br><span class="line">statements:</span><br><span class="line"><span class="comment">/*empty*/</span></span><br><span class="line">;</span><br><span class="line">%%</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">yyerror</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s)</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="YaccËØ≠Ê≥ïÁÆÄÂçï‰ªãÁªç"><a href="#YaccËØ≠Ê≥ïÁÆÄÂçï‰ªãÁªç" class="headerlink" title="YaccËØ≠Ê≥ïÁÆÄÂçï‰ªãÁªç"></a>YaccËØ≠Ê≥ïÁÆÄÂçï‰ªãÁªç</h5><ul>
<li><p><code>%{  %}</code>‰∏≠Âíå Flex ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ‰ΩÜÊòØÂÖ≥‰∫éËøôÈáåÁöÑ yylex Âíå yyerror ‰∏§‰∏™ÂáΩÊï∞Ôºå‰ªñ‰ª¨‰∏§ÂÖÑÂºüÊòØÂøÖÈ°ªÂºïÂÖ•ÁöÑ</p>
</li>
<li><p><strong>%union</strong> Â¶Ç‰πãÂâçÊâÄËØ¥ÔºåÂ∞ÜÈáçÊñ∞ÂÆö‰πâ <strong>yylval</strong> ÁöÑÁ±ªÂûãÔºåÂèØ‰ª•Âú®ËØçÊ≥ïÂàÜÊûêÈò∂ÊÆµÔºå‰øùÁïô‰∏çÂêåÁ±ªÂûãÁöÑÂÄº</p>
</li>
<li><p><strong>%token\&lt;stringValue> IDENTIFIER</strong> Â∞ÜÂú® yacc Â£∞Êòé‰∏Ä‰∏™Âêç‰∏∫ IDENTIFIER ÁöÑ tokenÔºåÂπ∂‰∏îË°®Êòé‰∫ÜÂÆÉÁöÑÂÄºÁ±ªÂûãÔºàËé∑ÂèñÂÆÉÁöÑÂÄºÊó∂ÔºåÂ∞Ü‰ªé union ÁöÑÂì™‰∏™Â≠óÊÆµÂèñÂÄºÔºâ„ÄÇ</p>
</li>
<li><p><strong>%type\&lt;object> statements</strong> ‰∏é <strong>%token</strong> ‰∏çÂêåÊòØÁöÑÔºåËøôÊòØÂ£∞Êòé‰∏ÄÊù°ËßÑÁ∫¶ÔºàËØ≠Ê≥ïËßÑÂàôÔºâ„ÄÇ</p>
</li>
<li><p><strong>%start</strong> Â∞Ü‰ªéÊåáÂÆöÁöÑËßÑÁ∫¶Ôºå‰Ωú‰∏∫ËØ≠Ê≥ïËß£ÊûêÂô®ÁöÑÂÖ•Âè£</p>
</li>
<li><p>ÂÖ≥‰∫é <code>%{  %}</code> Âíå <code>%% %%</code>Ôºå‰∏é flex ‰∏çÂêåÊòØÁöÑÔºå<code>%% %%</code> ‰∏≠ÈááÁî® BNF ÊñáÊ≥ïÁöÑÂèòÁßçÊù•ÊèèËø∞ËØ≠Ê≥ïËßÑÂàôÔºåÂΩì‰Ω†ÊòéÁôΩ‰∫ÜÂÆÉÁöÑËøê‰ΩúÊñπÂºèÔºåÂÖ∂ÂÆûÂèØËØªÊÄßËøòÊòØÂæàÈ´òÁöÑ„ÄÇ</p>
<p>Áé∞Âú®Êàë‰ª¨ÈúÄË¶Å‰ΩøÁî® <strong>lexer.l</strong> ‰ª•Âèä <strong>parser.y</strong> ÔºåÂÆåÊàêÂØπ <code>a = 1 + 2; b = 2.0 - 1.0;</code> ÁöÑËØÜÂà´ÔºåÂπ∂‰∏îÊâìÂç∞ËÆ°ÁÆóÁªìÊûú„ÄÇ</p>
<p>‰ΩøÁî® Yacc ÂÆûÁé∞ÂØπ‰∏§‰∏™Ë°®ËææÂºèÁöÑËØÜÂà´‰ª•ÂèäËÆ°ÁÆóÁöÑÊ∫êÁ†ÅÔºåÂ∑≤ÁªèÂú®‰ªìÂ∫ì <a href="https://github.com/SilverFruity/SimpleOCRunnerDemo" target="_blank" rel="noopener">SimpleOCRunnerDemo</a> ÁöÑ <a href="https://github.com/SilverFruity/SimpleOCRunnerDemo/commit/c09d35868207ec44e7a4854552e9b19246f561d1" target="_blank" rel="noopener">‰∏çÂêåÁ±ªÂûãÁÆÄÂçïËÆ°ÁÆóÁöÑ‰æãÂ≠ê</a>  ‰∏≠ÂÆåÊàêÔºåÂØπ Yacc ËØ≠Ê≥ï‰∏çÁÜüÊÇâÁöÑÂ∞è‰ºô‰º¥ÔºåÂèØ‰ª•ÁúãÂÆåËøô‰∏ÄÂ∞èÈÉ®ÂàÜÔºåÂÜçÂéªÁúãÊ∫êÁ†Å„ÄÇ‰∏∫ÈôêÂà∂Êú¨ÊñáÁØáÂπÖÔºåÊàëÂ∞ÜÂ∞ΩÈáèÂáèÂ∞ëÂú®Êñá‰∏≠ÁöÑ‰ª£Á†Å„ÄÇ</p>
<p>È¶ñÂÖàÊàë‰ª¨ÂÖàÂ∞Ü <code>a = 1 + 2; b = 2.0 - 1.0;</code> ËΩ¨Êç¢‰∏∫ Token :</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Ë°®ËææÂºè 1</span></span><br><span class="line">IDENTIFIER = INTETER_LITERAL + INTETER_LITERAL ;</span><br><span class="line"><span class="comment">//Ë°®ËææÂºè 2</span></span><br><span class="line">IDENTIFIER = DOUBLE_LITERAL - DOUBLE_LITERAL ;</span><br></pre></td></tr></table></figure>
<p>ÈÄö‰øóÊù•ËØ¥ÔºåÂ¶ÇÊûúÊàë‰ª¨ÈÄê‰∏™ÈÄê‰∏™ÁöÑËØªÂÖ•ÊØè‰∏™ TokenÔºåÊàë‰ª¨Ë¶ÅÂåπÈÖç‰∏äËø∞‰∏§‰∏™Ë°®ËææÂºèÔºåÂèØ‰ª•Êúâ‰ª•‰∏ã‰ª£Á†ÅÈÄªËæëÔºö</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">extern</span> Token <span class="title">nextToken</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="keyword">while</span>(token = nextToken()):</span><br><span class="line">	<span class="keyword">if</span> token == IDENTIFIER:</span><br><span class="line">		<span class="keyword">if</span> nextToken() == <span class="string">'='</span>:</span><br><span class="line">			 token = nextToken();</span><br><span class="line">		   <span class="keyword">if</span> token == INTETER_LITERAL:</span><br><span class="line">		   	 <span class="keyword">if</span> nextToken() == <span class="string">'+'</span>:</span><br><span class="line">		   	 	 <span class="keyword">if</span> nextToken() == INTETER_LITERAL:</span><br><span class="line">		   	 	   <span class="comment">//ÂÆåÊàê IDENTIFIER = INTETER_LITERAL + INTETER_LITERAL ;</span></span><br><span class="line">		   	 	 	 <span class="keyword">return</span></span><br><span class="line">		   <span class="keyword">if</span> token == DOUBLE_LITERAL:</span><br><span class="line">		   	 <span class="keyword">if</span> nextToken() == <span class="string">'-'</span>:</span><br><span class="line">		   	 	 <span class="keyword">if</span> nextToken() == DOUBLE_LITERAL:</span><br><span class="line">		   	 	   <span class="comment">//ÂÆåÊàê IDENTIFIER = DOUBLE_LITERAL - DOUBLE_LITERAL ;</span></span><br><span class="line">		   	 	 	 <span class="keyword">return</span></span><br><span class="line">	<span class="keyword">break</span>;</span><br><span class="line">	</span><br><span class="line"><span class="comment">// Ëøô‰∏™ÈÄªËæë‰ΩøÁî® Yacc ‰ª£Á†ÅÂèØ‰ª•Ë°®Á§∫‰∏∫</span></span><br><span class="line">assign_expression:</span><br><span class="line">IDENTIFIER <span class="string">'='</span> expression</span><br><span class="line">;</span><br><span class="line">expression:</span><br><span class="line">INTETER_LITERAL + INTETER_LITERAL</span><br><span class="line">| DOUBLE_LITERAL - DOUBLE_LITERAL</span><br><span class="line">;</span><br><span class="line"><span class="comment">//  NAME: ÂÖ∂ÂÆûÊòØÂÆûÁé∞‰∫Ü‰∏ÄÊù°ËßÑÁ∫¶ÔºàËØ≠Ê≥ïËßÑÂàôÔºâÔºåÂßãÁªàÂØπ‰∏ã‰∏Ä‰∏™TokenËøõË°åÂåπÈÖçÔºåÂÖ∂ÂÆû‰∏≠ÁöÑ | Ë°®Á§∫‰∏Ä‰∏™ or ÁöÑÈÄªËæëÂàÜÊîØÔºåËøòÊúâÂ∞±ÊòØËßÑÁ∫¶ÂèØ‰ª•ÈÄíÂΩí‰ΩøÁî®„ÄÇÊõ¥Â§öÁöÑYaccËØ≠Ê≥ïÂèØ‰ª•ÂèÇÈòÖ„Ääflex‰∏ébison‰∏≠ÊñáÁâà„Äã53È°µ„ÄÇ</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Áé∞Âú®ËÆ©Êàë‰ª¨ÂõûÂà∞ÂàùÂßãÁõÆÊ†áÔºåÁé∞Âú®Êàë‰ª¨Ë¶ÅÂÆûÁé∞ÂÆÉÁõ∏Â∫îÁöÑËØ≠Ê≥ïÂàÜÊûêÂô®:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> d = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> arg0, <span class="keyword">double</span> arg1)</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arg0 + arg1 + d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">1</span>; </span><br><span class="line"><span class="keyword">double</span> b = <span class="number">2.0</span>;</span><br><span class="line"><span class="keyword">int</span> c = add(a, b);</span><br></pre></td></tr></table></figure>
<p>ËøòËÆ∞ÂæóÊàë‰ª¨Âú®ËØçÊ≥ïÂàÜÊûêÂô®‰∏≠ÁöÑÂÆûÁé∞ÂêóÔºåÊñáÊú¨Âà∞ Token ÁöÑËΩ¨Êç¢ËßÑÂàô:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> -&gt; INT_TYPE</span><br><span class="line"><span class="keyword">double</span> -&gt; DOUBLE_TYPE</span><br><span class="line">'a-zA-z' -&gt; IDENTIFIER</span><br><span class="line"><span class="number">1</span> -&gt; INTEGER_LITERAL</span><br><span class="line"><span class="number">2.0</span> -&gt; DOUBLE_LITERAL</span><br><span class="line">()&#123;&#125;+,=; -&gt; ()&#123;&#125;+,=; <span class="comment">//Â≠óÁ¨¶</span></span><br></pre></td></tr></table></figure>
<p>È¶ñÂÖàÔºåÊàë‰ª¨ÂÆåÂÖ®ÂèØ‰ª•Á°ÆÂÆöÁöÑÊòØÔºåÂá∫Áé∞ÊúÄÂ§öÁöÑ Token ÁªÑÂêà‰∏∫Ôºö</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// int/double xxx</span></span><br><span class="line">TYPE IDENTIFIER</span><br></pre></td></tr></table></figure>
<p>ÂêåÊó∂Êàë‰ª¨ÁöÑÊï∞ÊçÆÁ±ªÂûãÊúâ‰∏§ÁßçÔºåÂàÜÂà´‰∏∫ int / double ÔºåÂõ†Ê≠§Êàë‰ª¨ÁöÑÁ¨¨‰∏ÄÊù°ËßÑÁ∫¶‰∏∫:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">specifier_type:</span><br><span class="line">INT_TYPE</span><br><span class="line">|DOUBLE_TYPE</span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p>Êé•‰∏ãÊù•ÔºåÊàë‰ª¨Êù•Ê¢≥ÁêÜ‰∏Ä‰∏ãÊâÄÊúâÁöÑÂ£∞ÊòéËØ≠Ê≥ïÔºàÂèòÈáè„ÄÅÂáΩÊï∞Ôºâ:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a</span><br><span class="line"><span class="keyword">double</span> b = <span class="number">2.0</span></span><br><span class="line"><span class="keyword">int</span> add(<span class="keyword">int</span> arg0, <span class="keyword">int</span> arg1)</span><br></pre></td></tr></table></figure>
<p>ÈíàÂØπ‰ª•‰∏ä‰∏â‰∏™Â£∞ÊòéËØ≠Ê≥ïÔºåÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ã‰∏§‰∏™ËßÑÁ∫¶ÂåπÈÖçÔºö</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ÂØπint/double xxxÁªü‰∏ÄÂ§ÑÁêÜÔºåÂÖ∂‰ªñÁöÑÂçïÁã¨Â§ÑÁêÜÂç≥ÂèØ</span></span><br><span class="line">declaration:</span><br><span class="line">specifier_type IDENTIFIER</span><br><span class="line">| declaration <span class="string">'='</span> expression</span><br><span class="line">| declaration <span class="string">'('</span> declaration_list <span class="string">')'</span></span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="comment">// declaration_list Â∞±ÊòØ‰∏Ä‰∏™‰ª•','‰∏∫ÂàÜÈöîÁ¨¶ÁöÑÂàóË°®Â§ÑÁêÜ</span></span><br><span class="line">declaration_list:</span><br><span class="line">declaration</span><br><span class="line">| declaration_list <span class="string">','</span> declaration</span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p>Êé•‰∏ãÊù•Êàë‰ª¨ÈúÄË¶ÅÂ§ÑÁêÜË°®ËææÂºèÔºåÊàë‰ª¨ËøôÈáåÂØπË°®ËææÂºèÁÆÄÂçïÁöÑÂÆö‰πâ‰∏∫Ôºö ‚Äò=‚Äô  Âíå ‚Äòreturn‚Äô Âè≥ÈÉ®ÂàÜÔºå‰∏çÂåÖÂê´ ‚Äò;‚Äô „ÄÇ</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1.0</span></span><br><span class="line">a</span><br><span class="line">a + b</span><br><span class="line">add(a, b)</span><br></pre></td></tr></table></figure>
<p>ÈíàÂØπ‰ª•‰∏äË°®ËææÂºèÔºåÂèØ‰ª•‰ΩøÁî®ÁöÑÊúÄÁÆÄËßÑÁ∫¶</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â§ÑÁêÜ 1„ÄÅ1.0„ÄÅa</span></span><br><span class="line">primary_expression:</span><br><span class="line">IDENTIFIER</span><br><span class="line">| INTETER_LITERAL</span><br><span class="line">| DOUBLE_LITERAL</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Â§ÑÁêÜ a + b„ÄÅadd(a, b)</span></span><br><span class="line">expression:</span><br><span class="line">primary_expression</span><br><span class="line">| expression <span class="string">'+'</span> expression</span><br><span class="line">| expression <span class="string">'('</span> expression_list <span class="string">')'</span></span><br><span class="line">;</span><br><span class="line"><span class="comment">// expression_list‰∏édeclaration_listÈõ∑Âêå</span></span><br></pre></td></tr></table></figure>
<p>ÂÆûÁé∞‰∫ÜexpressionËßÑÁ∫¶ÂêéÔºåÂÆûÁé∞ <strong>return</strong> Â∞±ÂæàÁÆÄÂçï‰∫Ü <code>RETURN expression</code>„ÄÇ</p>
<p>Êàë‰ª¨Â∞Ü <code>{ ... }</code> Ëøô‰∏™Êï¥‰ΩìÁªüÁß∞‰∏∫‰∏Ä‰∏™ÂùóÊàñËÄÖÊòØ‰ΩúÁî®ÂüüÔºåÂÆÉÁî±Ë°®ËææÂºèÁöÑÂàóË°®ÊàñËÄÖÂ≠ê‰ΩúÁî®ÂüüÁªÑÊàê„ÄÇ</p>
<p>Âú®ÂÆåÊàêÂØπÂùóÁöÑÂåπÈÖç‰πãÂâçÔºåÊàë‰ª¨È¶ñÂÖàË¶ÅËÉΩÂ§üÂåπÈÖçÂ§ö‰∏™‰∏çÂêåÁöÑÂ£∞Êòé„ÄÇ</p>
<p>Ê†πÊçÆÂ∑≤ÁªèÂÆûÁé∞ÁöÑËßÑÁ∫¶ÔºåÂú®ÂÖ∂Â∞æÈÉ®Âä†‰∏Ä‰∏™<code>;</code>ÔºåÂÆåÊàê‰∏Ä‰∏™Â£∞ÊòéÁöÑÂåπÈÖç„ÄÇ</p>
<p>Âõ†Ê≠§ÂÆûÁé∞‰∫Ü <code>statement</code> ËßÑÁ∫¶ÔºåÁî®‰ª•Â∞ÜÂêÑ‰∏™Â£∞ÊòéÁöÑËßÑÁ∫¶Êï¥Âêà„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">statement:</span><br><span class="line">declaration &apos;;&apos;</span><br><span class="line">| expression &apos;;&apos;</span><br><span class="line">| RETURN expression &apos;;&apos;</span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p>ÂÖ∂Ê¨°ÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÂåπÈÖç‰ΩúÁî®Âüü‰∏≠ÁöÑÂ§ö‰∏™Â£∞ÊòéÊàñËÄÖÈõ∂‰∏™Â£∞ÊòéÔºåÈÇ£‰πà <code>statement_list</code> Â∫îËøêËÄåÁîü„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">statement_list: </span><br><span class="line">| statement</span><br><span class="line">| statement_list statement</span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p>Ëøô‰∏™Êó∂ÂÄôÔºåÊàë‰ª¨Â∑≤ÁªèËÉΩÂ§üÂ§ÑÁêÜ‰ΩúÁî®Âüü‰∏≠ÁöÑÂ£∞ÊòéÂàóË°®‰∫ÜÔºåÈÇ£‰πàÈíàÂØπ‰ΩúÁî®ÂüüÁöÑËßÑÁ∫¶Â¶Ç‰∏ã:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scope_statements:</span><br><span class="line">&apos;&#123;&apos; statement_list &apos;&#125;&apos;</span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p>ÁõÆÂâçÂ∞±Âè™ÊúâÂØπÂáΩÊï∞ÁöÑÂ£∞ÊòéÊ≤°ÊúâÂÆûÁé∞‰∫ÜÔºå‰ΩÜÊàë‰ª¨Êó©Â∑≤Âú® <code>declaration</code> ‰∏≠ÂÆûÁé∞‰∫ÜÂØπ‰∫Ü <code>int add(int a, double b)</code> ËØÜÂà´„ÄÇ<br>ÊúÄÁªàÁöÑ <code>statement</code> ËßÑÁ∫¶Â¶Ç‰∏ã:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">statement:</span><br><span class="line">declaration <span class="string">';'</span></span><br><span class="line">| expression <span class="string">';'</span></span><br><span class="line">| RETURN expression <span class="string">';'</span></span><br><span class="line"><span class="comment">//ÂáΩÊï∞Â£∞ÊòéÁöÑËØÜÂà´</span></span><br><span class="line">| declaration scope_statements</span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p>Êú¨Â∞èËäÇÁõ∏ÂÖ≥‰ª£Á†ÅÔºåÂú®<a href="https://github.com/SilverFruity/SimpleOCRunnerDemo" target="_blank" rel="noopener">SimpleOCRunnerDemo</a> ÁöÑ <a href="https://github.com/SilverFruity/SimpleOCRunnerDemo/commit/850de3fe2db9ce3a059e809560bb2fb88ea3ac06" target="_blank" rel="noopener">section ËØ≠Ê≥ïÂàÜÊûê</a>  Êèê‰∫§‰∏≠„ÄÇ</p>
<h4 id="ÁîüÊàêËØ≠Ê≥ïÊ†ë"><a href="#ÁîüÊàêËØ≠Ê≥ïÊ†ë" class="headerlink" title="ÁîüÊàêËØ≠Ê≥ïÊ†ë"></a>ÁîüÊàêËØ≠Ê≥ïÊ†ë</h4><p>Âú®Êàë‰ª¨Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåËØ≠Ê≥ïÊ†ë‰∏≠ÈúÄË¶ÅÁöÑËäÇÁÇπÂ¶Ç‰∏ãÔºàÂ¶ÇÊûúÂ∞è‰ºô‰º¥ÊÉ≥Ê∑ªÂä†Êõ¥Â§öÁöÑËØ≠Ê≥ïÔºåÂèØËá™Ë°åÊõ¥ÊîπÔºâÔºö</p>
<p>ÊâÄÊúâËäÇÁÇπÈÉΩÁªßÊâøËá™<strong>ASTNode</strong>Á±ª„ÄÇ</p>
<ol>
<li><strong>ASTSpecifierNode</strong>ÂèòÈáèÁ±ªÂûãËäÇÁÇπÔºö<code>int</code> , <code>double</code>  </li>
<li><strong>ASTDeclareNode</strong>ÂèòÈáèÂ£∞ÊòéËäÇÁÇπÔºö<code>int a</code> </li>
<li><strong>ASTValueNode</strong>ÂÄºËäÇÁÇπ: <code>2</code>, <code>1.0</code>, <code>a</code></li>
<li><strong>ASTInitDeclareNode</strong>ÂèòÈáèÂàùÂßãÂåñÂ£∞ÊòéËäÇÁÇπ: <code>double b = 2.0</code></li>
<li><strong>ASTBinaryNode</strong>‰∫åÂÖÉËøêÁÆóËäÇÁÇπ: <code>a + b</code></li>
<li><strong>ASTScopeNode</strong>‰ΩúÁî®ÂüüËäÇÁÇπ: <code>{}</code></li>
<li><strong>ASTFunctionDeclareNode</strong>ÂáΩÊï∞Â£∞ÊòéËäÇÁÇπ: <code>int add(int arg0, double arg1)</code></li>
<li><strong>ASTFunctionImpNode</strong>ÂáΩÊï∞ËäÇÁÇπ:  <code>int add(int arg0, double arg1) { }</code></li>
<li><strong>ASTReturnNode </strong>returnËäÇÁÇπÔºö<code>return xxx</code></li>
<li><strong>ASTFunctionCallNode</strong>ÂáΩÊï∞Ë∞ÉÁî®ËäÇÁÇπ: <code>add(a, b)</code></li>
</ol>
<p><strong>ASTSpecifierNode</strong> <code>int/double</code>ÔºöÊàë‰ª¨ËøôÈáåÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÊûö‰∏æÔºå‰ΩÜÊàë‰ª¨ËøòÊ∑ªÂä†‰∫ÜÁ±ªÂûãÂêçÁß∞ÁöÑÂ±ûÊÄß</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">typedef enum&#123;</span><br><span class="line">    ASTSpecifierTypeInt,</span><br><span class="line">    ASTSpecifierTypeDouble</span><br><span class="line">&#125;ASTSpecifierType;</span><br><span class="line"></span><br><span class="line">@interface ASTSpecifierNode: ASTNode</span><br><span class="line">@property (nonatomic, assign) ASTSpecifierType type;</span><br><span class="line">@property (nonatomic, strong) NSString *typeName;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><strong>ASTDeclareNode</strong> <code>int a</code>:  ÂèØ‰ª•ÁúãÂá∫Áî±‰∏Ä‰∏™ÂèòÈáèÁ±ªÂûã( <strong>ASTSpecifierNode</strong> )ÂíåÂèòÈáèÂêçÁªÑÊàê</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@interface ASTDeclareNode: ASTNode</span><br><span class="line">@property (nonatomic, strong) ASTSpecifierNode *type;</span><br><span class="line">@property (nonatomic, strong) NSString *varname;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><strong>ASTValueNode</strong>  <code>2</code>, <code>1.0</code>, <code>a</code>:  Êúâ‰∏âÁßçÂÄºÔºåÊï¥Âûã„ÄÅÊµÆÁÇπÊï∞„ÄÅÂèòÈáèÂêç</p>
<p>Âú®Êàë‰ª¨ÁöÑ‰ª£Á†Å‰∏≠Â≠òÂú®‰∏§ÁßçÂèòÈáèÔºåÊ†áËØÜÁ¨¶Ôºö<code>a</code>ÔºåÊ†áÈáèÔºö<code>1.0 ...</code>ÔºåÂêåÊó∂‰∏Ä‰∏™ÂèòÈáèÂè™ËÉΩÊã•Êúâ‰∏Ä‰∏™ÂÄºÂíå‰∏Ä‰∏™ÂÄºÁ±ªÂûãÔºåÊâÄ‰ª•Êàë‰ª¨‰ΩøÁî®<code>enum ASTValueNodeType</code> + <code>union ASTValueNodeValue</code>ÁöÑÂΩ¢ÂºèÊù•ÂÆåÊàêÁ±ªÂûãÂíåÂÄºÁöÑÂØπÂ∫î„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">typedef enum&#123;</span><br><span class="line">    ASTValueNodeIdentifier,</span><br><span class="line">    ASTValueNodeInt,</span><br><span class="line">    ASTValueNodeDouble</span><br><span class="line">&#125;ASTValueNodeType;</span><br><span class="line"></span><br><span class="line">typedef union &#123;</span><br><span class="line">    void *pointerValue;</span><br><span class="line">    int64_t intValue;</span><br><span class="line">    double doubleValue;</span><br><span class="line">&#125;ASTValueNodeValue;</span><br><span class="line"></span><br><span class="line">@interface ASTValueNode: ASTNode</span><br><span class="line">@property (nonatomic, assign) ASTValueNodeType type;</span><br><span class="line">@property (nonatomic, assign) ASTValueNodeValue value;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><strong>ASTInitDeclareNode</strong> <code>double b = 2.0</code>: Ê≠§Êó∂Êàë‰ª¨ÂÜçÂ§ÑÁêÜÂàùÂßãÂåñÂ£∞ÊòéË°®ËææÂºèÁöÑÊï∞ÊçÆÁªìÊûÑÂ∞±ÂæàÁÆÄÂçï‰∫ÜÔºåÁî±ÂèòÈáèÂ£∞ÊòéËäÇÁÇπÂíåÂÄºËäÇÁÇπÁªÑÊàêÔºåÁªìÊûÑÂ¶Ç‰∏ã</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@interface ASTInitDeclareNode: ASTNode</span><br><span class="line">@property (nonatomic, strong) ASTDeclareNode *declare;</span><br><span class="line">@property (nonatomic, strong) ASTNode *expression;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><strong>ASTBinaryNode</strong> <code>a + b</code>: ‰∏ªË¶ÅÊúâÂ∑¶Âè≥‰∏§‰∏™Ë°®ËææÂºè‰ª•Âèä‰∏≠Èó¥ÁöÑÊìç‰ΩúÁ¨¶ÁªÑÊàê</p>
<p>‰∫ãÂÆû‰∏äÔºåÂ∑¶Âè≥ÁöÑË°®ËææÂºèÂèØËÉΩÂπ∂‰∏çÂçïÂçïÂè™ÊòØ‰∏Ä‰∏™ÂèòÈáèÂêçÔºàÊàñËÄÖË°®ËææÂºèÔºâÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨ËøôÈáå‰ΩøÁî®ÁöÑÊòØ<strong>ASTNode</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">typedef enum &#123;</span><br><span class="line">    ASTBinaryNodeOperatorAdd</span><br><span class="line">&#125;ASTBinaryNodeOperator;</span><br><span class="line"></span><br><span class="line">@interface ASTBinaryNode: ASTNode</span><br><span class="line">@property (nonatomic, assign) ASTBinaryNodeOperator operator;</span><br><span class="line">@property (nonatomic, strong) ASTNode *left;</span><br><span class="line">@property (nonatomic, strong) ASTNode *right;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><strong>ASTScopeNode</strong>  <code>{}</code> ‰∏≠‰∏ªË¶ÅÂ≠òÂú®ÁöÑÊòØÂ§ö‰∏™ËØ≠Ê≥ïËäÇÁÇπÔºåÂõ†Ê≠§ÔºåÂÖ∂Â±ûÊÄßÂè™Êúâ‰∏Ä‰∏™Â≠òÂÇ®ËäÇÁÇπÁöÑÊï∞ÁªÑ</p>
<p><strong>ASTFunctionDeclareNode</strong>  <code>int add(int a, double b)</code>Ôºå‰∏ªË¶ÅÁî±‰∏Ä‰∏™ <strong>ASTDeclareNode</strong>Ôºà<code>int add</code>ÔºâÂíåÂÆÉÁöÑÊï∞ÁªÑÔºà<code>int a, double b</code>ÔºâÁªÑÊàê</p>
<p><strong>ASTFunctionImpNode</strong> <code>int add(int a, double b) { }</code>ÔºåÂàôÊòØÁî±‰∏äËø∞‰∏§‰∏™ËäÇÁÇπÁªÑÊàê</p>
<p><strong>ASTFunctionCallNode</strong> <code>add(a, b)</code> ÔºåÁî±‰∏Ä‰∏™Ë∞ÉÁî®ËÄÖËäÇÁÇπÂíåÂèÇÊï∞ËäÇÁÇπÊï∞ÁªÑÁªÑÊàê</p>
<p>Âõ†Ê≠§‰ªñ‰ª¨ÁöÑÁªìÊûÑÂ¶Ç‰∏ã:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@interface ASTScopeNode : ASTNode</span><br><span class="line">@property (nonatomic, strong) NSMutableArray *nodes;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface ASTFunctionDeclareNode: ASTNode</span><br><span class="line">@property (nonatomic, strong) ASTDeclareNode *declare;</span><br><span class="line">@property (nonatomic, strong) NSMutableArray *argDeclares;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface ASTFunctionImpNode: ASTNode</span><br><span class="line">@property (nonatomic, strong) ASTFunctionDeclareNode *declare;</span><br><span class="line">@property (nonatomic, strong) ASTScopeNode *scope;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface ASTFunctionCallNode: ASTNode</span><br><span class="line">@property (nonatomic, strong) ASTNode *caller;</span><br><span class="line">@property (nonatomic, strong) NSMutableArray *args;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>ÊúÄÁªà <strong>parser.y</strong> ‰∏≠ÁöÑÈÉ®ÂàÜ‰ª£Á†ÅÂ¶Ç‰∏ãÔºå<strong>globalAst</strong> ‰∏∫‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑËØ≠Ê≥ïÊ†ëÂèòÈáè:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">door:</span><br><span class="line">statement_list</span><br><span class="line">&#123;</span><br><span class="line">    globalAst.nodes = $1;</span><br><span class="line">&#125;</span><br><span class="line">;</span><br><span class="line">statement_list:</span><br><span class="line">&#123;</span><br><span class="line">    __autoreleasing id value = [NSMutableArray array];</span><br><span class="line">    $$ = value;</span><br><span class="line">&#125;</span><br><span class="line">| statement_list statement</span><br><span class="line">&#123;</span><br><span class="line">    [$1 addObject: $2];</span><br><span class="line">    $$ = $1;</span><br><span class="line">&#125;</span><br><span class="line">;</span><br><span class="line">.......</span><br></pre></td></tr></table></figure>
<p>ÂÖ≥‰∫éÂú® <strong>.l</strong> Âíå <strong>.y</strong>‰∏≠‰π¶ÂÜô‰ª£Á†Å‰∏çÊñπ‰æøÁöÑÈóÆÈ¢òÔºåÂèØ‰ª•Âú® vscode ‰∏≠ÂÆâË£Ö flex Âíå bsion ÁöÑÁõ∏ÂÖ≥Êèí‰ª∂ÔºåÊúâ‰∫Ü‰ª£Á†ÅÊèêÁ§∫Ôºå‰ΩìÈ™å‰ºöÂ•ΩÂæàÂ§öÂæàÂ§ö„ÄÇ</p>
<h5 id="ÂçïÂÖÉÊµãËØï"><a href="#ÂçïÂÖÉÊµãËØï" class="headerlink" title="ÂçïÂÖÉÊµãËØï"></a>ÂçïÂÖÉÊµãËØï</h5><blockquote>
<p>‰∏∫‰ªÄ‰πà‰ºöÂú®ËøôÂÑøÊèêÂà∞ÂçïÂÖÉÊµãËØïÂë¢Ôºü</p>
<p>oc2mango ‰ª•Âèä OCRunner ËÉΩÂ§üÂºÄÂèëÂá∫Êù•ÔºåÂçïÂÖÉÊµãËØïÊúâË∂ÖÂ§ßÂäüÂä≥„ÄÇ</p>
<p>ÈíàÂØπ oc2mango ÊñπÈù¢ÔºåÈöèÁùÄÈ°πÁõÆÁöÑÂèëÂ±ïÔºåË∂äÊù•Ë∂äÂ§öÁöÑËØ≠Ê≥ïÈúÄË¶ÅÊîØÊåÅÔºåÂΩì‰Ω†Âú®‰øÆÊîπËØ≠Ê≥ïÂàÜÊûêÂô®ÁöÑÊó∂ÂÄôÔºåÁ®çÊúâ‰∏Ä‰∏™‰∏çÊÖéÔºåÂ∞±ÊûÅÊúâÂèØËÉΩÂØºËá¥Â∑≤ÁªèÊîØÊåÅÁöÑËØ≠Ê≥ïÂèòÊàê‰∏çÊîØÊåÅÔºåÊ≤°ÊúâÂçïÂÖÉÊµãËØïÁöÑËØùÔºåÂêéÁª≠ÁöÑÂºÄÂèëÂá†‰πéÂ∞±ÂØ∏Ê≠•ÈöæË°å‰∫Ü„ÄÇÁé∞Âú®ÂèçÊÄù‰∏Ä‰∏ãÔºåÊØèÁïô‰∏ã‰∏Ä‰∏™ÁàÜÁ∫¢ÁöÑÊµãËØïÁ§∫‰æãÔºåÊúâÊó∂‰πüÂÉè‰∏Ä‰∏™‰∏Ä‰∏™ÊåëÊàòÔºåÁ≠âÁùÄ‰Ω†ÂéªÂæÅÊúç‰ªñ‰ª¨ÔºåÁªø‰∫Ü‰ª•ÂêéÊÑüËßâË¥ºÁàΩ„ÄÇ</p>
</blockquote>
<p>‰πãÂâçÊàë‰ª¨‰∏ÄÁõ¥Ê≤°ÊúâÊèêÂà∞ÂçïÂÖÉÊµãËØïÔºå‰ΩÜÂú®ÁõÆÂâçËøô‰∏™Èò∂ÊÆµÔºåÊàë‰ª¨Â∑≤ÁªèÂèØ‰ª•ÊÑâÂø´ÁöÑ‰ΩøÁî®ÂçïÂÖÉÊµãËØï‰∫ÜÔºàÂÖ∂ÂÆûÊàë‰ª¨Âú®ÊúÄÂºÄÂßãÁöÑÊó∂ÂÄôÂ∞±Â∫îËØ•‰ΩøÁî®ÁöÑüòÇÔºåÁØáÂπÖÊúâÈôêÂïäÔºâ„ÄÇ</p>
<p>ÁõÆÂâçÊàë‰ª¨ÁöÑÂçïÂÖÉÊµãËØïÁõÆÊ†áÂæàÊòéÁ°ÆÔºöÊ£ÄÈ™åÁîüÊàêÁöÑËØ≠Ê≥ïÊ†ëÊòØÂê¶Ê≠£Á°Æ„ÄÇ</p>
<p>ÈÇ£Êàë‰ª¨ÁöÑËæìÂÖ•-&gt;ËæìÂá∫ÁöÑÊ¶ÇÂøµÂ∫îËØ•‰∏∫ÔºöÊ∫êÁ†Å-&gt;ËØ≠Ê≥ïÊ†ë-&gt;ÂçïÂÖÉÊµãËØï-&gt;ÊòØÂê¶Ê≠£Á°Æ„ÄÇ</p>
<p>‰πãÂâçÁöÑ‰ª£Á†ÅÔºåÊàë‰ª¨ÊòØÊó†Ê≥ïÈÄöËøá [SingleEngine run:] ÂæóÂà∞ËØ≠Ê≥ïÊ†ëÁöÑÔºåÂõ†Ê≠§Êàë‰ª¨Âú®SingleEngine‰∏≠Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™ <strong>+ (AST <em>)parse: (NSString </em>)source</strong>ÁöÑÁ±ªÊñπÊ≥ïÔºåÁî®‰∫éÂÆåÊàêÔºöÊ∫êÁ†Å-&gt;ËØ≠Ê≥ïÊ†ë„ÄÇ</p>
<p>‰∏∫‰∫ÜÊñπ‰æøÂçïÂÖÉÊµãËØïÔºå‰πüÂú® SingleEngine ‰∏≠ÁâπÊÑèÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ parserError Áî®‰∫éÊúÄÂü∫Á°ÄÁöÑËØ≠Ê≥ïÊµãËØïÂà§Êñ≠„ÄÇ</p>
<p>ÂΩì‰Ω†ÊâìÁÆóÂ∞ùËØïÂä†ÂÖ•‰∏Ä‰∏™Êñ∞ÁöÑËØ≠Ê≥ïÊó∂Ôºå‰Ω†ÂèØ‰ª•ÂÜô‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑÂÖ≥‰∫é parserError ÁöÑÂçïÂÖÉÊµãËØïÔºå‰∫Æ‰∏Ä‰∏™Á∫¢ÁÅØ„ÄÇ</p>
<p>Á§∫‰æãÔºöSimpleOCRunnerDemoTests.m ‰∏≠ÁöÑ testExample ‰ª£Á†Å:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (void)testExample &#123;</span><br><span class="line">    NSString *source =</span><br><span class="line">    @&quot;int a = 1;&quot;</span><br><span class="line">    &quot;double b = 1.0;&quot;;</span><br><span class="line">    AST *ast = [SingleEngine parse:source];</span><br><span class="line">    XCTAssert(parserError == nil, @&quot;error: %@&quot;, parserError);</span><br><span class="line">    ASTInitDeclareNode *node1 = (ASTInitDeclareNode *)ast.nodes.firstObject;</span><br><span class="line">    XCTAssert([node1 isKindOfClass:[ASTInitDeclareNode class]]);</span><br><span class="line">    XCTAssert([node1.declare.varname isEqual:@&quot;a&quot;]);</span><br><span class="line">    XCTAssert(node1.declare.type != nil);</span><br><span class="line">    XCTAssert(node1.declare.type.type == ASTSpecifierTypeInt);</span><br><span class="line">    XCTAssert([node1.expression isKindOfClass:[ASTValueNode class]]);</span><br><span class="line">    XCTAssert([(ASTValueNode *)node1.expression value].intValue == 1);</span><br><span class="line">    </span><br><span class="line">    ASTInitDeclareNode *node2 = (ASTInitDeclareNode *)ast.nodes.lastObject;</span><br><span class="line">    XCTAssert([node2 isKindOfClass:[ASTInitDeclareNode class]]);</span><br><span class="line">    XCTAssert([node2.declare.varname isEqual:@&quot;b&quot;]);</span><br><span class="line">    XCTAssert(node2.declare.type != nil);</span><br><span class="line">    XCTAssert(node2.declare.type.type == ASTSpecifierTypeDouble);</span><br><span class="line">    XCTAssert([node2.expression isKindOfClass:[ASTValueNode class]]);</span><br><span class="line">    XCTAssert([(ASTValueNode *)node2.expression value].doubleValue == 1.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Êú¨Â∞èËäÇÁõ∏ÂÖ≥‰ª£Á†Å‰Ωç‰∫é <a href="https://github.com/SilverFruity/SimpleOCRunnerDemo/commit/4f27bd65488a2cf9b669b1047ab242b2f8a5999d" target="_blank" rel="noopener">Section: ÁîüÊàêËØ≠Ê≥ïÊ†ë</a>.</p>
<h4 id="ÊâßË°åËØ≠Ê≥ïÊ†ë"><a href="#ÊâßË°åËØ≠Ê≥ïÊ†ë" class="headerlink" title="ÊâßË°åËØ≠Ê≥ïÊ†ë"></a>ÊâßË°åËØ≠Ê≥ïÊ†ë</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> d = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> arg0, <span class="keyword">double</span> arg1)</span></span>&#123; ¬†</span><br><span class="line">  <span class="keyword">return</span> arg0 + arg1 + d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">double</span> b = <span class="number">2.0</span>;</span><br><span class="line"><span class="keyword">int</span> c = add(a, b);</span><br></pre></td></tr></table></figure>
<p>Âú®ÂºÄÂßãÊ≠£Êñá‰ª•ÂâçÔºåÊàë‰ª¨ÂÖàÊÄùËÄÉÂá†‰∏™ÈóÆÈ¢òÔºö</p>
<ol>
<li><code>int a = 1;</code>ÔºåÂÖ≥‰∫é a ÁöÑÂÄºÔºåÂ∫îÂ¶Ç‰ΩïÂ≠òÂÇ®ÔºåÂπ∂‰∏îÂú®ÂêéÁª≠ÁöÑËÆ°ÁÆó‰∏≠ËøòËÉΩËé∑ÂèñÂà∞ a ÁöÑÂÄºÔºü</li>
<li><code>int a = 1; double b = 1.0; int c = a + b;</code>ÔºåÂÖ≥‰∫éËøôÈáåÔºåÂú®ËÆ°ÁÆó c Êó∂Ôºåa Âíå b ÁöÑÂÄºÔºåÂ¶Ç‰ΩïÊâçËÉΩËé∑ÂèñÂà∞ÔºåÂπ∂‰∏î a„ÄÅb ÁöÑÂÄºÊòØ‰∏§‰∏™‰∏çÂêåÁöÑÁ±ªÂûãÔºåÂ¶Ç‰ΩïËÆ©‰ªñ‰ª¨‰ª•Ëá™Â∑±ÁöÑÁ±ªÂûãËøõË°åËÆ°ÁÆóÔºåÂπ∂‰∏îÊúÄÁªàÁöÑÂÄºË¢´Âº∫ËΩ¨‰∏∫intÔºü</li>
<li><code>add(a , b);</code> ÂáΩÊï∞Ë∞ÉÁî®Êó∂ÔºåÂèÇÊï∞Â¶Ç‰Ωï‰º†ÈÄíÔºü</li>
<li>Âú® <code>add</code> ÂáΩÊï∞ÁöÑË∞ÉÁî®‰∏≠Ôºå<strong>d</strong> ÁöÑÂÄºÂ¶Ç‰ΩïËé∑ÂèñÔºü</li>
<li>Â¶Ç‰ΩïÂÖºÂÆπÁöÑ Objective-C ÁöÑ <a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html" target="_blank" rel="noopener">TypeEncode</a>Ôºü</li>
</ol>
<p>Áé∞Âú®ÊúâÂá†‰∏™Ê¶ÇÂøµÈúÄË¶ÅËÆ≤‰∏Ä‰∏ã‰∫Ü„ÄÇ</p>
<h5 id="‰ΩúÁî®ÂüüÔºàEvalScopeÔºâ"><a href="#‰ΩúÁî®ÂüüÔºàEvalScopeÔºâ" class="headerlink" title="‰ΩúÁî®ÂüüÔºàEvalScopeÔºâ"></a>‰ΩúÁî®ÂüüÔºàEvalScopeÔºâ</h5><p><code>{ }</code>Â∞±ÂèØËßÜ‰∏∫‰∏Ä‰∏™‰ΩúÁî®ÂüüÔºåEvalScope ‰∏ªË¶ÅÁî±‰∏Ä‰∏™ NSMuatbleDictionary Âíå‰∏Ä‰∏™Áà∂‰ΩúÁî®ÂüüÁöÑÂºïÁî®ÁªÑÊàê„ÄÇ</p>
<p>ÂÆÉÁöÑ‰ΩúÁî®‰∏ªË¶ÅÊòØÔºö</p>
<p>1.Â≠òÂÇ®Âú®ÂΩìÂâç‰ΩúÁî®Âüü‰∏≠Â£∞ÊòéÁöÑÂèòÈáèÁöÑÂÄºÔºåÊØîÂ¶Ç: <code>int a = 1</code>ÔºåEvalScope[‚Äúa‚Äù] = ORValue(1)„ÄÇÂΩì <code>int b = a</code> ËøôÁßçÊÉÖÂÜµÊó∂ÔºåÂàô‰ºöÂéª EvalScope Êü•Êâæ ‚Äòa‚Äô ÂèòÈáèÁöÑÂÄºÔºåÁÑ∂ÂêéÂÜçÊ≥®ÂÜå‰∏Ä‰∏™ ‚Äòb‚Äô ÁöÑÂèòÈáè„ÄÇ</p>
<p>2.Áà∂‰ΩúÁî®ÂüüÁöÑÂºïÁî®‰∏ªË¶ÅÁî®‰∫éË∑®ÂüüÊìç‰ΩúÊó∂ÔºåË∑®ÂüüÂèòÈáèÊü•Êâæ‰ª•Âèä‰øÆÊîπ„ÄÇÊàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠Ôºå‰πüÂá∫Áé∞‰∫ÜËøôÁßçÊÉÖÂÜµ„ÄÇ</p>
<h5 id="‰∏≠Èó¥ÂÄºÔºàORValueÔºâ"><a href="#‰∏≠Èó¥ÂÄºÔºàORValueÔºâ" class="headerlink" title="‰∏≠Èó¥ÂÄºÔºàORValueÔºâ"></a>‰∏≠Èó¥ÂÄºÔºàORValueÔºâ</h5><p>Á´ôÂú®‰ΩúÁî®ÂüüÁöÑÂü∫Á°Ä‰πã‰∏äÔºåÂú®Â≠óÂÖ∏‰∏≠‰øùÂ≠òÁöÑÂÄºÔºåÈúÄË¶ÅÊòØ‰∏Ä‰∏™ÂØπË±°„ÄÇ</p>
<p>Â∞ΩÁÆ°ÁõÆÂâçÊàë‰ª¨Âè™ÈúÄË¶ÅÂ§ÑÁêÜ int Âíå double Á±ªÂûãÁöÑÂÄºÔºå‰ΩÜÈöèÁùÄÁ±ªÂûãÁöÑÂ¢ûÂä†ÔºåÈúÄË¶Å‰∏Ä‰∏™Á±ªÊù•Â∞ÅË£ÖÁ±ªÂûãÂ§ÑÁêÜÁöÑÁõ∏ÂÖ≥ÈÄªËæë‰ª•ÂèäÂÄºÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂ≠òÂÇ®ÁöÑ„ÄÇ</p>
<p>‰∏∫‰∫ÜÂÖºÂÆπ Objective-C ÁöÑ TypeEncodeÔºåÂú®Á±ª‰∏≠ÔºåÊ∑ªÂä†‰∏Ä‰∏™ typeEncode ÁöÑÂ±ûÊÄßÔºå‰ª•ÂÅöÂà∞ÔºöORValue = ÂÄº + TypeEncode ÁöÑÁªÑÂêà„ÄÇ</p>
<p>ÂêåÊó∂Ôºå‰∏∫‰∫ÜËÉΩÂ§üÊéßÂà∂ÂΩìÂâçÁöÑÊâßË°åÁä∂ÊÄÅÔºåÊã•Êúâ‰∏Ä‰∏™ controlState Â±ûÊÄßÔºåÁî®‰∫éÂú®‰ª£Á†Å‰∏≠ÂÆûÁé∞ return „ÄÅcontinue„ÄÅbreak„ÄÇ</p>
<h5 id="ÂÖ®Â±ÄÂáΩÊï∞Ë°®ÔºàFunctionTableÔºâ"><a href="#ÂÖ®Â±ÄÂáΩÊï∞Ë°®ÔºàFunctionTableÔºâ" class="headerlink" title="ÂÖ®Â±ÄÂáΩÊï∞Ë°®ÔºàFunctionTableÔºâ"></a>ÂÖ®Â±ÄÂáΩÊï∞Ë°®ÔºàFunctionTableÔºâ</h5><p>‰∏∫‰∫ÜÂÖ®Â±ÄÂáΩÊï∞ËÉΩÂ§üÊ≠£Â∏∏Ë∞ÉÁî®ÔºåÊØîÂ¶ÇÈÄöËøá <code>add(1, 0)</code> ÁöÑÂΩ¢ÂºèÔºåÂç≥ÂèØË∞ÉÁî®addÂáΩÊï∞ÁöÑÂÆûÁé∞„ÄÇÂõ†Ê≠§Êàë‰ª¨ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Âçï‰æã‰∏ªË¶ÅÁî®‰∫éÂ≠òÂÇ® <strong>[String : ASTFunctionImpNode]</strong> ÁöÑÂ≠óÂÖ∏„ÄÇ</p>
<p>ÂÖ≥‰∫é <strong>ASTFunctionImpNode</strong> ÁöÑÊ≥®ÂÜåÂíåÊâßË°åÁöÑÈóÆÈ¢òÔºö</p>
<p>ÂΩìÈÅçÂéÜ execute ËØ≠Ê≥ïÊ†ëÊó∂ÔºåÊ≠§Êó∂‰∏∫Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî® ASTFunctionImpNode.execute ÔºåËøô‰∏™Êó∂ÂÄô‰ºöÂêëÂÖ®Â±ÄÂáΩÊï∞Ë°®ËøõË°åÊ≥®ÂÜåÔºåÊ≠§Êó∂ EvalArgsStack ‰∏≠ÁöÑÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ÂøÖÂÆö‰∏∫0„ÄÇÊâÄÊúâÁöÑÂáΩÊï∞ÂíåÊñπÊ≥ïË∞ÉÁî®ÁöÑÊó∂ÂÄôÔºåÊ≠§Êó∂ EvalArgsStack ÁöÑÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ÂøÖÂÆö &gt;= 1ÔºåÂõ†Ê≠§Èô§‰∫ÜÁ¨¨‰∏ÄÊ¨°Ê≥®ÂÜåÊâßË°å‰ª•Â§ñÔºåÊ≠§Âêé ASTFunctionImpNode ÊâÄÊúâÁöÑ executeÔºåÈÉΩËøõË°åËß£ÈáäÊâßË°åÊìç‰Ωú„ÄÇ</p>
<h5 id="ÂáΩÊï∞ÂèÇÊï∞Ê†àÔºàEvalArgsStackÔºâ"><a href="#ÂáΩÊï∞ÂèÇÊï∞Ê†àÔºàEvalArgsStackÔºâ" class="headerlink" title="ÂáΩÊï∞ÂèÇÊï∞Ê†àÔºàEvalArgsStackÔºâ"></a>ÂáΩÊï∞ÂèÇÊï∞Ê†àÔºàEvalArgsStackÔºâ</h5><p>ÂÆÉÂÖ∂ÂÆûÂæàÁÆÄÂçï„ÄÇÂú®ÂáΩÊï∞Ë∞ÉÁî®ÂâçÔºåÂÖàÂ∞ÜÊâÄÊúâÁöÑÂèÇÊï∞ÊåâÁÖßÈ°∫Â∫èÁªÑÊàê‰∏Ä‰∏™Êï∞ÁªÑÂéãÂÖ•Ê†à‰∏≠ÔºåÂáΩÊï∞ÊâßË°åÊó∂Ôºå‰ªéÊ†àÈ°∂ÂèñÂá∫Êï∞ÁªÑÔºåÈöèÂêéÊ≥®ÂÜåÂà∞ÂáΩÊï∞‰ΩúÁî®Âüü‰∏≠ÔºåÂΩìÂáΩÊï∞ÊâßË°åÂÆåÊàêÂêéÔºåÂÜçÂ∞ÜÂèÇÊï∞Êï∞ÁªÑÂá∫Ê†à„ÄÇ</p>
<p>ÂΩìÂáΩÊï∞ÊâßË°åÊó∂ÔºåÊòØÂ¶Ç‰ΩïËé∑ÂèñÂà∞‰ªñ‰ª¨ÁöÑÂÄºÁöÑÂë¢Ôºü</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//Êàë‰ª¨ÂÜçÂõûÈ°æ‰∏Ä‰∏ã ÂáΩÊï∞Â£∞ÊòéÁöÑÁªìÊûÑ</span><br><span class="line">@interface ASTFunctionDeclareNode: ASTNode</span><br><span class="line">@property (nonatomic, strong) ASTDeclareNode *declare;</span><br><span class="line">@property (nonatomic, strong) NSMutableArray &lt;ASTDeclareNode *&gt;*argDeclares;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>Â∑≤Áü• <code>int add(int arg0, double arg1){ }</code> Êàë‰ª¨Ë∞ÉÁî®<code>add(1, 0);</code>„ÄÇ</p>
<p>È¶ñÂÖàÔºåÊàë‰ª¨‰ΩøÁî® ‚Äòadd‚Äô Âú® FunctionTable ‰∏≠Êü•ÊâæÂà∞ <code>add</code> ÂáΩÊï∞ÁöÑÂÆûÁé∞ÔºàASTFunctionImpNodeÔºâ„ÄÇ</p>
<p>Ë∞ÉÁî®ÂáΩÊï∞ÂÆûÁé∞ÂâçÔºåÂÖàÊâßË°å<code>[EvalArgsStack.push:@[ORValue(1), ORValue(0)]]</code>„ÄÇ</p>
<p>ÊúÄÁªà ASTFunctionImpNode.exexcute Êó∂ÔºåÂêë‰ΩúÁî®Âüü‰∏≠Ê≥®ÂÜåÂèÇÊï∞ÂèòÈáèÁöÑÈÄªËæëÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *args = [EvalArgsStack top];</span><br><span class="line"><span class="built_in">NSArray</span> *declares = <span class="keyword">self</span>.declare.argDeclares;</span><br><span class="line">functionSubScope[declares[<span class="number">0</span>].varname] = args[<span class="number">0</span>]; <span class="comment">//functionSubScope["arg0"] = args[0];</span></span><br><span class="line">functionSubScope[declares[<span class="number">1</span>].varname] = args[<span class="number">1</span>]; <span class="comment">//functionSubScope["arg1"] = args[1];</span></span><br></pre></td></tr></table></figure>
<p>ÂÖ≥‰∫éÊúÄÁªà‰ª£Á†ÅËøêË°åÁöÑÈÄªËæëÂ¶Ç‰∏ã:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> d = <span class="number">2</span>;  <span class="comment">// TopScope[‚Äúd‚Äù] = ORValue(2);</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> arg0, <span class="keyword">double</span> arg1)</span></span>&#123; </span><br><span class="line">    <span class="comment">// ASTFunctionImpNode.exexcute(SubScope) -&gt; ORValue:</span></span><br><span class="line">    <span class="comment">// list&lt;ORValue&gt; = ArgsStack.last</span></span><br><span class="line">    <span class="comment">// SubScope[‚Äúarg0‚Äù] = list[0] = ORValue(1)</span></span><br><span class="line">    <span class="comment">// SubScope[‚Äúarg1‚Äù] = lsit[1] = ORValue(2.0)</span></span><br><span class="line">    <span class="comment">// d = SubScope-&gt;superScope[‚Äúd‚Äù] = TopScope[‚Äúd‚Äù] = ORValue(2)</span></span><br><span class="line">    <span class="comment">// return ORValue(1) + ORValue(2.0) + ORValue(2)</span></span><br><span class="line">    <span class="keyword">return</span> arg0 + arg1 + d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">1</span>; <span class="comment">// TopScope[‚Äúa‚Äù] = ORValue(1);</span></span><br><span class="line"><span class="keyword">double</span> b = <span class="number">2.0</span>; <span class="comment">// TopScope[‚Äúb‚Äù] = ORValue(2.0);</span></span><br><span class="line"><span class="keyword">int</span> c = add(a, b);</span><br><span class="line"><span class="comment">// ASTFunctionImpNode = GlobalFunctionTable[‚Äúadd‚Äù]</span></span><br><span class="line"><span class="comment">// ArgsStack.push([a, b])</span></span><br><span class="line"><span class="comment">// SubScope-&gt;superScope = TopScope</span></span><br><span class="line"><span class="comment">// TopScope[‚Äúc‚Äù] = ASTFunctionImpNode.exexcute(SubScope)</span></span><br><span class="line"><span class="comment">// ArgsStack.pop()</span></span><br></pre></td></tr></table></figure>
<img src="/2021/03/09/OCRunner-SimpleOCRunner/OCRunnerExecute.png">
<p>Êú¨Â∞èËäÇÁõ∏ÂÖ≥‰ª£Á†Å‰Ωç‰∫é<a href="https://github.com/SilverFruity/SimpleOCRunnerDemo/commit/33e2358c4e06baa1f35d4309b76f376a753f58fc" target="_blank" rel="noopener">Section: ÊâßË°åËØ≠Ê≥ïÊ†ë</a>.</p>
<p>Âú®Ëøô‰∏™ÁÆÄÂçïÁöÑ demo ÈáåÈù¢ÔºåËÆ∏Â§öÂäüËÉΩÈÉΩËøòÊú™ÂÆåÊàêÔºöÊìç‰ΩúÁ¨¶„ÄÅÂü∫Êú¨Á±ªÂûãËΩ¨Êç¢„ÄÅÊåáÈíà„ÄÅÊñπÊ≥ïÊõøÊç¢„ÄÅÊéßÂà∂ËØ≠Âè•„ÄÅÁªìÊûÑ‰ΩìÁ≠âÁ≠âÔºå‰ΩÜÊàëÂ∏åÊúõËÉΩÂ§üËÆ©Â∞è‰ºô‰º¥‰ª¨ÂØπËØ≠Ê≥ïÊ†ëËß£ÈáäÊâßË°åÊúâ‰∏Ä‰∏™Âü∫Êú¨ÁöÑ‰∫ÜËß£„ÄÇÈíàÂØπÊú™ÂÆûÁé∞ÁöÑÂäüËÉΩÔºåÊÉ≥Ê∑±ÂÖ•ÁöÑ‰∫∫ÔºåÂÆåÂÖ®ÂèØ‰ª•ÈÄöËøá‰øÆÊîπ demoÔºåÂÆåÊàê‰ª•‰∏äÂäüËÉΩÔºåÁñëÊÉëÁöÑÂú∞ÊñπÔºåÂèØ‰ª•Êü•Áúã OCRunner ÁöÑÊ∫êÁ†Å„ÄÇ</p>

      
    </div>
    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Êú¨Êñá‰ΩúËÄÖÔºö</strong>
    Jiang
  </li>
  <li class="post-copyright-link">
    <strong>Êú¨ÊñáÈìæÊé•Ôºö</strong>
    <a href="https://silverfruity.github.io/2021/03/09/OCRunner-SimpleOCRunner/" title="OCRunner-ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁâà OCRunner">https://silverfruity.github.io/2021/03/09/OCRunner-SimpleOCRunner/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ÁâàÊùÉÂ£∞ÊòéÔºö </strong>
    Êú¨ÂçöÂÆ¢ÊâÄÊúâÊñáÁ´†Èô§ÁâπÂà´Â£∞ÊòéÂ§ñÔºåÂùáÈááÁî® <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> ËÆ∏ÂèØÂçèËÆÆ„ÄÇËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§ÑÔºÅ
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/hotfix/" rel="tag"># hotfix</a>
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
            <a href="/tags/Objective-C/" rel="tag"># Objective-C</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/03/09/OCRunner-StartCodingHotFix/" rel="next" title="OCRunner-‰ªéÈõ∂Êïô‰Ω†ÂÜô‰∏Ä‰∏™ iOS ÁÉ≠‰øÆÂ§çÊ°ÜÊû∂">
                <i class="fa fa-chevron-left"></i> OCRunner-‰ªéÈõ∂Êïô‰Ω†ÂÜô‰∏Ä‰∏™ iOS ÁÉ≠‰øÆÂ§çÊ°ÜÊû∂
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/03/09/OCRunner-PatchFile/" rel="prev" title="OCRunner - ‰∫åËøõÂà∂Ë°•‰∏ÅÊñá‰ª∂ÁöÑÂÆûÁé∞">
                OCRunner - ‰∫åËøõÂà∂Ë°•‰∏ÅÊñá‰ª∂ÁöÑÂÆûÁé∞ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            ÊñáÁ´†ÁõÆÂΩï
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Á´ôÁÇπÊ¶ÇËßà
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="Jiang">
            
              <p class="site-author-name" itemprop="name">Jiang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">Êó•Âøó</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">ÂàÜÁ±ª</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">Ê†áÁ≠æ</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#ËØçÊ≥ïÂàÜÊûêÂô®"><span class="nav-number">1.</span> <span class="nav-text">ËØçÊ≥ïÂàÜÊûêÂô®</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#FlexËØ≠Ê≥ïÁÆÄÂçïÁÆÄ‰ªã"><span class="nav-number">1.1.</span> <span class="nav-text">FlexËØ≠Ê≥ïÁÆÄÂçïÁÆÄ‰ªã</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ËØ≠Ê≥ïÂàÜÊûêÂô®"><span class="nav-number">2.</span> <span class="nav-text">ËØ≠Ê≥ïÂàÜÊûêÂô®</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#YaccËØ≠Ê≥ïÁÆÄÂçï‰ªãÁªç"><span class="nav-number">2.1.</span> <span class="nav-text">YaccËØ≠Ê≥ïÁÆÄÂçï‰ªãÁªç</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ÁîüÊàêËØ≠Ê≥ïÊ†ë"><span class="nav-number">3.</span> <span class="nav-text">ÁîüÊàêËØ≠Ê≥ïÊ†ë</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ÂçïÂÖÉÊµãËØï"><span class="nav-number">3.1.</span> <span class="nav-text">ÂçïÂÖÉÊµãËØï</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ÊâßË°åËØ≠Ê≥ïÊ†ë"><span class="nav-number">4.</span> <span class="nav-text">ÊâßË°åËØ≠Ê≥ïÊ†ë</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#‰ΩúÁî®ÂüüÔºàEvalScopeÔºâ"><span class="nav-number">4.1.</span> <span class="nav-text">‰ΩúÁî®ÂüüÔºàEvalScopeÔºâ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#‰∏≠Èó¥ÂÄºÔºàORValueÔºâ"><span class="nav-number">4.2.</span> <span class="nav-text">‰∏≠Èó¥ÂÄºÔºàORValueÔºâ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ÂÖ®Â±ÄÂáΩÊï∞Ë°®ÔºàFunctionTableÔºâ"><span class="nav-number">4.3.</span> <span class="nav-text">ÂÖ®Â±ÄÂáΩÊï∞Ë°®ÔºàFunctionTableÔºâ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ÂáΩÊï∞ÂèÇÊï∞Ê†àÔºàEvalArgsStackÔºâ"><span class="nav-number">4.4.</span> <span class="nav-text">ÂáΩÊï∞ÂèÇÊï∞Ê†àÔºàEvalArgsStackÔºâ</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jiang</span>

  
</div>


  <div class="powered-by">Áî± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> Âº∫ÂäõÈ©±Âä®</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">‰∏ªÈ¢ò &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'VS3cQiJ0SvKu8yffcUhucXVa-gzGzoHsz',
        appKey: '7IsQXOyh5G5NhvJGb0gCQvtl',
        placeholder: 'Emmm.',
        avatar:'monsterid',
        meta:guest,
        pageSize:'10' || 10,
        visitor: true
    });
  </script>



  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
